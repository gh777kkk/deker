<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deker.cmm.mapper.CMMMapper">

    <select id="selectCode" parameterType="CMMConditions" resultType="CMM">
        SELECT      CODE        code
                ,   CODE_NM     codeNm
        FROM CODE_DETAIL
        WHERE CODE_ID = #{codeId}
    </select>

    <update id="updateIds" parameterType="String">
        INSERT INTO IDS
        (TABEL_NAME, NEXT_ID)
        VALUES (#{tableName},0)
        ON DUPLICATE KEY UPDATE
        TABEL_NAME = #{tableName},
        NEXT_ID = NEXT_ID+1
    </update>

    <select id="selectIds" parameterType="String" resultType="Integer">
        SELECT NEXT_ID  nextId
        FROM IDS
        WHERE TABEL_NAME = #{tableName}
    </select>

</mapper>

